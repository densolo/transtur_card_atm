
import org.gradle.internal.os.OperatingSystem

ext {
    isWindows = OperatingSystem.current().isWindows()
    platformExt = isWindows ? ".exe": ""
}


task goGetAll(type:Exec) {
  workingDir "${project.projectDir}"
  environment "GOPATH", "${project.projectDir}"

  commandLine 'go', 'get', 'all'
}


task goBuild(type:Exec) {
  workingDir "${project.projectDir}"
  environment "GOPATH", "${project.projectDir}"

  commandLine 'go', 'build', '-o', "bin/transtur_card_atm${platformExt}", 'src/transtur_card_atm/main/main.go'
}


task goRun(type:Exec) {
  workingDir "${project.projectDir}"
  environment "GOPATH", "${project.projectDir}"

  commandLine 'go', 'run', 'src/transtur_card_atm/main/main.go'
}
